<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Jogo da Forca</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@latest/css/pico.min.css">
  <script defer src="https://pyscript.net/latest/pyscript.js"></script>
  <style>
    body {
      text-align: center;
      margin-top: 2rem;
    }
    .forca {
      font-size: 2rem;
      letter-spacing: 1rem;
    }
    .letras-erradas {
      color: crimson;
    }
    canvas {
      margin: 1rem auto;
      display: block;
      background: #eee;
    }
  </style>
</head>
<body>
  <h1>ðŸª“ Jogo da Forca</h1>
  <canvas id="forcaCanvas" width="200" height="200"></canvas>
  <div class="forca" id="palavra">_ _ _ _</div>
  <p>Letras erradas: <span class="letras-erradas" id="erradas"></span></p>
  <input id="letra" maxlength="1" placeholder="Digite uma letra" />
  <button onclick="adivinhar()">Tentar</button>
  <p id="mensagem"></p>

  <py-script>
import random
from js import document

palavras = {
    "facil": ["casa", "bola", "sol", "pato"],
    "medio": ["livro", "janela", "cachorro", "escola"],
    "dificil": ["paralelepipedo", "hipopotamo", "laboratorio", "psicologia"]
}

nivel = random.choice(list(palavras.keys()))
palavra = random.choice(palavras[nivel])
erros = []
acertos = ["_" for _ in palavra]
desenho = 0
canvas = document.getElementById("forcaCanvas")
ctx = canvas.getContext("2d")


def desenhar():
    global desenho
    if desenho == 1:
        ctx.beginPath()
        ctx.moveTo(10, 190)
        ctx.lineTo(190, 190)
        ctx.stroke()
    elif desenho == 2:
        ctx.beginPath()
        ctx.moveTo(50, 190)
        ctx.lineTo(50, 20)
        ctx.stroke()
    elif desenho == 3:
        ctx.beginPath()
        ctx.lineTo(150, 20)
        ctx.stroke()
    elif desenho == 4:
        ctx.beginPath()
        ctx.lineTo(150, 40)
        ctx.stroke()
    elif desenho == 5:
        ctx.beginPath()
        ctx.arc(150, 50, 10, 0, 2 * 3.14)
        ctx.stroke()
    elif desenho == 6:
        ctx.beginPath()
        ctx.moveTo(150, 60)
        ctx.lineTo(150, 100)
        ctx.stroke()
    elif desenho == 7:
        ctx.beginPath()
        ctx.moveTo(150, 70)
        ctx.lineTo(130, 90)
        ctx.stroke()
    elif desenho == 8:
        ctx.beginPath()
        ctx.moveTo(150, 70)
        ctx.lineTo(170, 90)
        ctx.stroke()
    elif desenho == 9:
        ctx.beginPath()
        ctx.moveTo(150, 100)
        ctx.lineTo(130, 130)
        ctx.stroke()
    elif desenho == 10:
        ctx.beginPath()
        ctx.moveTo(150, 100)
        ctx.lineTo(170, 130)
        ctx.stroke()

def atualizar():
    document.getElementById("palavra").innerHTML = " ".join(acertos)
    document.getElementById("erradas").innerHTML = ", ".join(erros)

def adivinhar():
    global desenho
    letra = str(document.getElementById("letra").value).lower()
    document.getElementById("letra").value = ""
    if letra in palavra:
        for i in range(len(palavra)):
            if palavra[i] == letra:
                acertos[i] = letra
    else:
        if letra not in erros:
            erros.append(letra)
            desenho += 1
            desenhar()

    atualizar()

    if "_" not in acertos:
        document.getElementById("mensagem").innerHTML = f"\u2728 VocÃª venceu! Palavra: {palavra.upper()} (nÃ­vel: {nivel})"
    elif desenho >= 10:
        document.getElementById("mensagem").innerHTML = f"ðŸ˜µ VocÃª perdeu! Era: {palavra.upper()} (nÃ­vel: {nivel})"

atualizar()
  </py-script>
</body>
</html>
